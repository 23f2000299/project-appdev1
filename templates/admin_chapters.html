{% extends 'base.html' %}
{% block title %}Manage Chapters{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Chapters for {{ subject.name }}</h2>
  <p>{{ subject.description }}</p>
  
  <!-- List of Chapters -->
  <ul class="list-group mb-3">
    {% for chapter in subject.chapters %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ chapter.name }}</strong> - {{ chapter.description or '' }}
      </div>
      <form method="POST" action="{{ url_for('delete_chapter', chapter_id=chapter.id) }}"
            style="display:inline;">
        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
      </form>
    </li>
    {% endfor %}
  </ul>

  <!-- Add Chapter Form -->
  <h4>Add New Chapter</h4>
  <form method="POST" action="{{ url_for('add_chapter', subject_id=subject.id) }}">
    <div class="form-group">
      <label for="chapterName">Name</label>
      <input type="text" name="chapter_name" id="chapterName" class="form-control" required>
    </div>
    <div class="form-group">
      <label for="chapterDesc">Description</label>
      <textarea name="chapter_description" id="chapterDesc" class="form-control"></textarea>
    </div>
    <button type="submit" class="btn btn-success">Save</button>
  </form>
  
  <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary mt-3">Back to Dashboard</a>
</div>
{% endblock %}
